var u=Object.defineProperty,a=(e,n)=>u(e,"name",{value:n,configurable:!0});let t="en",o=["en"];const i=new Set;typeof window<"u"&&window.__TSD_CONFIG__?(t=r()||window.__TSD_CONFIG__.defaultLocale,o=window.__TSD_CONFIG__.supportedLocales):(t="en",o=["en","es","fr","de","ja","zh"]);function r(){if(typeof window>"u")return null;const n=window.location.pathname.match(/^\/([a-z]{2})(?:\/|$)/);return n&&o.includes(n[1])?n[1]:null}a(r,"detectLocaleFromUrl");function d(){i.forEach(e=>e(t))}a(d,"notifySubscribers");const _={get current(){return t},get supported(){return o},subscribe(e){return i.add(e),e(t),()=>{i.delete(e)}}};function w(e){if(!o.includes(e)){console.warn(`[TSd] Locale "${e}" is not supported`);return}const n=t;if(t=e,typeof window<"u"){const s=new URL(window.location.href).pathname.replace(/^\/[a-z]{2}(?:\/|$)/,"/"),c=`/${e}${s}`;typeof window<"u"&&"__sveltekit"in window?window.dispatchEvent(new CustomEvent("tsd:locale-navigate",{detail:{path:c,locale:e,previousLocale:n}})):window.history.pushState({},"",c),window.dispatchEvent(new CustomEvent("tsd:locale-changed",{detail:{locale:e,previousLocale:n}}))}d()}a(w,"setLocale");function l(){return t}a(l,"getLocale");typeof window<"u"&&window.addEventListener("popstate",()=>{const e=r();e&&e!==t&&(t=e,d())});export{_ as l,w as s};
