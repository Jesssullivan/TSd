{"version":3,"file":"_layout.svelte-4pncKHc8.js","sources":["../../../.svelte-kit/adapter-node/entries/pages/_locale_/_layout.svelte.js"],"sourcesContent":["import { D as getContext, F as store_get, G as slot, I as unsubscribe_stores, J as bind_props, C as pop, z as push } from \"../../../chunks/index.js\";\nimport \"../../../chunks/client.js\";\nvar __defProp = Object.defineProperty;\nvar __name = (target, value) => __defProp(target, \"name\", { value, configurable: true });\nlet currentLocale = \"en\";\nlet supportedLocales = [\"en\"];\nconst subscribers = /* @__PURE__ */ new Set();\nif (typeof window !== \"undefined\" && window.__TSD_CONFIG__) {\n  currentLocale = detectLocaleFromUrl() || window.__TSD_CONFIG__.defaultLocale;\n  supportedLocales = window.__TSD_CONFIG__.supportedLocales;\n} else {\n  currentLocale = \"en\";\n  supportedLocales = [\"en\", \"es\", \"fr\", \"de\", \"ja\", \"zh\"];\n}\nfunction detectLocaleFromUrl() {\n  if (typeof window === \"undefined\") return null;\n  const pathname = window.location.pathname;\n  const match = pathname.match(/^\\/([a-z]{2})(?:\\/|$)/);\n  if (match && supportedLocales.includes(match[1])) {\n    return match[1];\n  }\n  return null;\n}\n__name(detectLocaleFromUrl, \"detectLocaleFromUrl\");\nfunction notifySubscribers() {\n  subscribers.forEach((fn) => fn(currentLocale));\n}\n__name(notifySubscribers, \"notifySubscribers\");\nfunction setLocale(locale) {\n  if (!supportedLocales.includes(locale)) {\n    console.warn(`[TSd] Locale \"${locale}\" is not supported`);\n    return;\n  }\n  const previousLocale = currentLocale;\n  currentLocale = locale;\n  if (typeof window !== \"undefined\") {\n    const url = new URL(window.location.href);\n    const pathname = url.pathname;\n    const cleanPath = pathname.replace(/^\\/[a-z]{2}(?:\\/|$)/, \"/\");\n    const newPath = `/${locale}${cleanPath}`;\n    if (typeof window !== \"undefined\" && \"__sveltekit\" in window) {\n      window.dispatchEvent(\n        new CustomEvent(\"tsd:locale-navigate\", {\n          detail: { path: newPath, locale, previousLocale }\n        })\n      );\n    } else {\n      window.history.pushState({}, \"\", newPath);\n    }\n    window.dispatchEvent(\n      new CustomEvent(\"tsd:locale-changed\", {\n        detail: { locale, previousLocale }\n      })\n    );\n  }\n  notifySubscribers();\n}\n__name(setLocale, \"setLocale\");\nfunction getLocale() {\n  return currentLocale;\n}\n__name(getLocale, \"getLocale\");\nif (typeof window !== \"undefined\") {\n  window.addEventListener(\"popstate\", () => {\n    const detectedLocale = detectLocaleFromUrl();\n    if (detectedLocale && detectedLocale !== currentLocale) {\n      currentLocale = detectedLocale;\n      notifySubscribers();\n    }\n  });\n}\nconst getStores = () => {\n  const stores$1 = getContext(\"__svelte__\");\n  return {\n    /** @type {typeof page} */\n    page: {\n      subscribe: stores$1.page.subscribe\n    },\n    /** @type {typeof navigating} */\n    navigating: {\n      subscribe: stores$1.navigating.subscribe\n    },\n    /** @type {typeof updated} */\n    updated: stores$1.updated\n  };\n};\nconst page = {\n  subscribe(fn) {\n    const store = getStores().page;\n    return store.subscribe(fn);\n  }\n};\nfunction _layout($$payload, $$props) {\n  push();\n  var $$store_subs;\n  let data = $$props[\"data\"];\n  if (data.locale) {\n    setLocale(data.locale);\n  }\n  if (store_get($$store_subs ??= {}, \"$page\", page).params.locale) {\n    setLocale(store_get($$store_subs ??= {}, \"$page\", page).params.locale);\n  }\n  $$payload.out += `<!---->`;\n  slot($$payload, $$props, \"default\", {});\n  $$payload.out += `<!---->`;\n  if ($$store_subs) unsubscribe_stores($$store_subs);\n  bind_props($$props, { data });\n  pop();\n}\nexport {\n  _layout as default\n};\n"],"names":[],"mappings":"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"}