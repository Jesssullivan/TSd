import"../chunks/CWj6FrbW.js";import"../chunks/69_IOA4Y.js";import{o as Rt,a as oe}from"../chunks/vsKkyAZf.js";import{h as G,ap as ie,aq as le,ar as ue,$ as Dt,am as H,M as Lt,g as ce,a0 as V,a1 as Ht,k as t,F as b,a2 as l,a3 as u,f as ve,a4 as c,D as J,J as de,as as x}from"../chunks/BckHep5H.js";import{s as L,e as k}from"../chunks/DKFbEgCw.js";import{i as gt,b as fe}from"../chunks/CstVbTSV.js";import{f as M,a as h,t as w}from"../chunks/CUK3pkoi.js";import{i as ge}from"../chunks/BfUNpN1q.js";import{p as It}from"../chunks/DySfId5U.js";import{s as pe}from"../chunks/BgcUizg5.js";import{l as pt,s as _e}from"../chunks/Cne7te_C.js";import{g as he}from"../chunks/C69954PU.js";const Nt=[...` 	
\r\f¬†\v\uFEFF`];function be(r,i,a){var e=r==null?"":""+r;if(a){for(var n in a)if(a[n])e=e?e+" "+n:n;else if(e.length)for(var s=n.length,p=0;(p=e.indexOf(n,p))>=0;){var g=p+s;(p===0||Nt.includes(e[p-1]))&&(g===e.length||Nt.includes(e[g]))?e=(p===0?"":e.substring(0,p))+e.substring(g+1):p=g}}return e===""?null:e}function At(r,i=!1){var a=i?" !important;":";",e="";for(var n in r){var s=r[n];s!=null&&s!==""&&(e+=" "+n+": "+s+a)}return e}function me(r,i){if(i){var a="",e,n;return Array.isArray(i)?(e=i[0],n=i[1]):e=i,e&&(a+=At(e)),n&&(a+=At(n,!0)),a=a.trim(),a===""?null:a}return String(r)}function S(r,i,a,e,n,s){var p=r.__className;if(G||p!==a||p===void 0){var g=be(a,e,s);(!G||g!==r.getAttribute("class"))&&(g==null?r.removeAttribute("class"):r.className=g),r.__className=a}else if(s&&n!==s)for(var T in s){var P=!!s[T];(n==null||P!==!!n[T])&&r.classList.toggle(T,P)}return s}function ft(r,i={},a,e){for(var n in a){var s=a[n];i[n]!==s&&(a[n]==null?r.style.removeProperty(n):r.style.setProperty(n,s,e))}}function kt(r,i,a,e){var n=r.__style;if(G||n!==i){var s=me(i,e);(!G||s!==r.getAttribute("style"))&&(s==null?r.removeAttribute("style"):r.style.cssText=s),r.__style=i}else e&&(Array.isArray(e)?(ft(r,a==null?void 0:a[0],e[0]),ft(r,a==null?void 0:a[1],e[1],"important")):ft(r,a,e));return e}const $e=Symbol("is custom element"),Te=Symbol("is html");function xe(r,i,a,e){var n=we(r);G&&(n[i]=r.getAttribute(i)),n[i]!==(n[i]=a)&&(a==null?r.removeAttribute(i):typeof a!="string"&&Ee(r).includes(i)?r[i]=a:r.setAttribute(i,a))}function we(r){return r.__attributes??(r.__attributes={[$e]:r.nodeName.includes("-"),[Te]:r.namespaceURI===ie})}var Mt=new Map;function Ee(r){var i=Mt.get(r.nodeName);if(i)return i;Mt.set(r.nodeName,i=[]);for(var a,e=r,n=Element.prototype;n!==e;){a=ue(e);for(var s in a)a[s].set&&i.push(s);e=le(e)}return i}var ye=M('<span class="tsd-original svelte-1wyrky8"> </span> <span class="tsd-slot-content svelte-1wyrky8"><!></span>',1),Pe=M('<span class="translated-text svelte-1wyrky8"> </span>'),Ce=M("<span><!></span>");function E(r,i){Dt(i,!0);let a=It(i,"native",3,"en"),e=H(""),n=H(!0),s=H(""),p=H(null),g=H(Lt({protocol:"unknown",environment:"unknown",isEnvoy:!1})),T,P=null,y=H(Lt(pt.current));ce(()=>pt.subscribe(m=>{b(y,m,!0),t(p)&&t(s)&&N()})),Rt(()=>{const v=()=>{if(T){const m=document.createTreeWalker(T,NodeFilter.SHOW_TEXT,null);let _="",$;for(;$=m.nextNode();)_+=$.textContent||"";b(s,_.trim(),!0),console.log("[TSd] Extracted text content:",t(s))}};return setTimeout(()=>{v();let m=0;const _=()=>{const $=window.__TSD_GRPC_CLIENT__;if(!$){m++,m<50?setTimeout(_,100):(console.error("[TSd] gRPC client not available after 5 seconds"),b(e,t(s),!0),b(n,!1));return}console.log("[TSd] gRPC client found, setting up subscription"),b(p,$,!0),$.envoyConfig&&b(g,$.envoyConfig,!0),P=$.subscribeToUpdates(X),N()};_()},0),window.addEventListener("tsd:translations-updated",I),window.addEventListener("tsd:locale-changed",q),()=>{P&&P(),window.removeEventListener("tsd:translations-updated",I),window.removeEventListener("tsd:locale-changed",q)}});async function N(){if(!t(p)||!t(s)){console.log("[TSd] Cannot request translation:",{grpcClient:!!t(p),textContent:t(s)});return}if(console.log("[TSd] Requesting translation:",{text:t(s),native:a(),currentLocale:t(y)}),t(y)===a()){b(e,t(s),!0),b(n,!1);return}try{b(e,await t(p).translate(t(s),a(),t(y)),!0),b(n,!1)}catch(v){console.error("[TSd] Translation error:",v),b(e,t(s),!0),b(n,!1)}}function X(v){v.entry&&v.entry.text===t(s)&&v.entry.translations&&v.entry.translations[t(y)]&&b(e,v.entry.translations[t(y)],!0)}function I(v){const _=v.detail;for(const $ in _)if(_[$].text===t(s)){b(e,_[$].translations[t(y)]||t(s),!0);break}}function q(){t(s)&&N()}var C=Ce();let O;var F=l(C);{var Y=v=>{var m=ye(),_=ve(m);let $;var R=l(_,!0);u(_);var D=c(_,2);let A;var W=l(D);pe(W,()=>i.children),u(D),V(()=>{$=kt(_,"",$,{display:t(s)&&t(n)?"inline":"none"}),L(R,t(s)),A=kt(D,"",A,{display:t(s)?"none":"contents"})}),h(v,m)},U=v=>{var m=Pe(),_=l(m,!0);u(m),V(()=>L(_,t(e))),h(v,m)};gt(F,v=>{!t(s)||t(n)?v(Y):v(U,!1)})}u(C),fe(C,v=>T=v,()=>T),V(v=>{O=S(C,1,"tsd-translation svelte-1wyrky8",null,O,v),xe(C,"title",`${t(g).isEnvoy?"Via Envoy Proxy":"Direct HTTP"} - ${t(g).environment??""}`)},[()=>({loading:t(n),translating:t(n)&&t(s)})]),h(r,C),Ht()}var Se=M('<span class="status envoy svelte-1g7u9i2">üöÄ Envoy Proxy</span>'),Le=M('<span class="status http svelte-1g7u9i2">üåê HTTP/JSON</span>'),Ne=M('<div class="debug-info svelte-1g7u9i2"><p>Open your browser console to see detailed translation logs including:</p> <ul class="svelte-1g7u9i2"><li class="svelte-1g7u9i2">üöÄ Envoy proxy detection</li> <li class="svelte-1g7u9i2">üì§ Translation requests with timing</li> <li class="svelte-1g7u9i2">üì• Translation responses</li> <li class="svelte-1g7u9i2">üîî Real-time update notifications</li> <li class="svelte-1g7u9i2">‚ö° Performance metrics</li></ul></div>'),Ae=M('<div class="container svelte-1g7u9i2"><header class="svelte-1g7u9i2"><h1 class="svelte-1g7u9i2"><!></h1> <div class="connection-status svelte-1g7u9i2"><!> <span class="env svelte-1g7u9i2"> </span></div></header> <nav class="svelte-1g7u9i2"><button>English</button> <button>Espa√±ol</button> <button>Fran√ßais</button> <button>Deutsch</button> <button>Êó•Êú¨Ë™û</button> <button>‰∏≠Êñá</button></nav> <main><section class="demo-section svelte-1g7u9i2"><h2><!></h2> <div class="example svelte-1g7u9i2"><h3 class="svelte-1g7u9i2"><!></h3> <p><!></p> <p><!></p></div> <div class="example svelte-1g7u9i2"><h3 class="svelte-1g7u9i2"><!></h3> <p><!></p> <p><!></p> <p><!></p> <p><!></p></div> <div class="example svelte-1g7u9i2"><h3 class="svelte-1g7u9i2"><!></h3> <p><!></p></div></section> <section class="info-section svelte-1g7u9i2"><h2 class="svelte-1g7u9i2">Current Status</h2> <ul class="svelte-1g7u9i2"><li class="svelte-1g7u9i2">Locale: <strong> </strong></li> <li class="svelte-1g7u9i2">Protocol: <strong> </strong></li> <li class="svelte-1g7u9i2">Environment: <strong> </strong></li> <li class="svelte-1g7u9i2">Envoy: <strong> </strong></li></ul> <button class="debug-toggle svelte-1g7u9i2"> </button> <!></section></main></div>');function je(r,i){Dt(i,!1);let a=It(i,"data",8),e=J(a().locale),n,s=J({}),p=J(!0),g=J(!1);Rt(()=>{n=pt.subscribe(d=>{b(e,d)});const o=()=>{const d=window.__TSD_GRPC_CLIENT__;d&&d.envoyConfig?b(s,d.envoyConfig):setTimeout(o,100)};o()}),oe(()=>{n&&n()});async function T(o){if(!(t(g)||o===t(e))){b(g,!0);try{_e(o),await he(`/${o}/tsd-demo`,{replaceState:!0,noScroll:!0,keepFocus:!0})}finally{b(g,!1)}}}ge();var P=Ae(),y=l(P),N=l(y),X=l(N);E(X,{children:(o,d)=>{x();var f=w("Welcome to TSd Demo");h(o,f)},$$slots:{default:!0}}),u(N);var I=c(N,2),q=l(I);{var C=o=>{var d=Se();h(o,d)},O=o=>{var d=Le();h(o,d)};gt(q,o=>{t(s).isEnvoy?o(C):o(O,!1)})}var F=c(q,2),Y=l(F,!0);u(F),u(I),u(y);var U=c(y,2),v=l(U);let m;var _=c(v,2);let $;var R=c(_,2);let D;var A=c(R,2);let W;var j=c(A,2);let _t;var B=c(j,2);let ht;u(U);var K=c(U,2);let bt;var Q=l(K),Z=l(Q),qt=l(Z);E(qt,{children:(o,d)=>{x();var f=w("Translation Examples");h(o,f)},$$slots:{default:!0}}),u(Z);var tt=c(Z,2),et=l(tt),Ut=l(et);E(Ut,{children:(o,d)=>{x();var f=w("Simple Text");h(o,f)},$$slots:{default:!0}}),u(et);var st=c(et,2),Gt=l(st);E(Gt,{children:(o,d)=>{x();var f=w("Hello, world!");h(o,f)},$$slots:{default:!0}}),u(st);var mt=c(st,2),Ot=l(mt);E(Ot,{children:(o,d)=>{x();var f=w("This is a test of the TSd translation system.");h(o,f)},$$slots:{default:!0}}),u(mt),u(tt);var rt=c(tt,2),at=l(rt),Ft=l(at);E(Ft,{children:(o,d)=>{x();var f=w("Common Phrases");h(o,f)},$$slots:{default:!0}}),u(at);var nt=c(at,2),Wt=l(nt);E(Wt,{children:(o,d)=>{x();var f=w("Welcome");h(o,f)},$$slots:{default:!0}}),u(nt);var ot=c(nt,2),jt=l(ot);E(jt,{children:(o,d)=>{x();var f=w("Thank you");h(o,f)},$$slots:{default:!0}}),u(ot);var it=c(ot,2),zt=l(it);E(zt,{children:(o,d)=>{x();var f=w("Good morning");h(o,f)},$$slots:{default:!0}}),u(it);var $t=c(it,2),Jt=l($t);E(Jt,{children:(o,d)=>{x();var f=w("Goodbye");h(o,f)},$$slots:{default:!0}}),u($t),u(rt);var Tt=c(rt,2),lt=l(Tt),Vt=l(lt);E(Vt,{children:(o,d)=>{x();var f=w("Longer Text");h(o,f)},$$slots:{default:!0}}),u(lt);var xt=c(lt,2),Xt=l(xt);E(Xt,{children:(o,d)=>{x();var f=w("This translation system uses just-in-time translation with caching to provide fast, efficient multilingual support for your application.");h(o,f)},$$slots:{default:!0}}),u(xt),u(Tt),u(Q);var wt=c(Q,2),ut=c(l(wt),2),ct=l(ut),Et=c(l(ct)),Yt=l(Et,!0);u(Et),u(ct);var vt=c(ct,2),yt=c(l(vt)),Bt=l(yt,!0);u(yt),u(vt);var dt=c(vt,2),Pt=c(l(dt)),Kt=l(Pt,!0);u(Pt),u(dt);var Ct=c(dt,2),St=c(l(Ct)),Qt=l(St,!0);u(St),u(Ct),u(ut);var z=c(ut,2),Zt=l(z);u(z);var te=c(z,2);{var ee=o=>{var d=Ne();h(o,d)};gt(te,o=>{t(p)&&o(ee)})}u(wt),u(K),u(P),V((o,d,f,se,re,ae,ne)=>{L(Y,t(s).environment||"loading..."),v.disabled=t(g),m=S(v,1,"svelte-1g7u9i2",null,m,o),_.disabled=t(g),$=S(_,1,"svelte-1g7u9i2",null,$,d),R.disabled=t(g),D=S(R,1,"svelte-1g7u9i2",null,D,f),A.disabled=t(g),W=S(A,1,"svelte-1g7u9i2",null,W,se),j.disabled=t(g),_t=S(j,1,"svelte-1g7u9i2",null,_t,re),B.disabled=t(g),ht=S(B,1,"svelte-1g7u9i2",null,ht,ae),bt=S(K,1,"svelte-1g7u9i2",null,bt,ne),L(Yt,t(e)),L(Bt,t(s).protocol||"loading..."),L(Kt,t(s).environment||"loading..."),L(Qt,t(s).isEnvoy?"Yes":"No"),L(Zt,`${t(p)?"Hide":"Show"} Console Logs`)},[()=>({active:t(e)==="en"}),()=>({active:t(e)==="es"}),()=>({active:t(e)==="fr"}),()=>({active:t(e)==="de"}),()=>({active:t(e)==="ja"}),()=>({active:t(e)==="zh"}),()=>({loading:t(g)})],de),k("click",v,()=>T("en")),k("click",_,()=>T("es")),k("click",R,()=>T("fr")),k("click",A,()=>T("de")),k("click",j,()=>T("ja")),k("click",B,()=>T("zh")),k("click",z,()=>b(p,!t(p))),h(r,P),Ht()}export{je as component};
