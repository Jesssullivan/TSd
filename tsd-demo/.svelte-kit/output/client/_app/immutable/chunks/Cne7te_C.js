var u=Object.defineProperty,r=(e,n)=>u(e,"name",{value:n,configurable:!0});let t="en",o=["en"];const a=new Set;typeof window<"u"&&window.__TSD_CONFIG__?(t=c()||window.__TSD_CONFIG__.defaultLocale,o=window.__TSD_CONFIG__.supportedLocales):(t="en",o=["en","es","fr","de","ja","zh"]);function c(){if(typeof window>"u")return null;const n=window.location.pathname.match(/^\/([a-z]{2})(?:\/|$)/);return n&&o.includes(n[1])?n[1]:null}r(c,"detectLocaleFromUrl");function i(){a.forEach(e=>e(t))}r(i,"notifySubscribers");const _={get current(){return t},get supported(){return o},subscribe(e){return a.add(e),e(t),()=>{a.delete(e)}}};function l(e){if(!o.includes(e)){console.warn(`[TSd] Locale "${e}" is not supported`);return}const n=t;if(t=e,typeof window<"u"){const d=new URL(window.location.href).pathname.replace(/^\/[a-z]{2}(?:\/|$)/,"/"),s=`/${e}${d}`;window.history.pushState({},"",s),window.dispatchEvent(new CustomEvent("tsd:locale-changed",{detail:{locale:e,previousLocale:n}}))}i()}r(l,"setLocale");function w(){return t}r(w,"getLocale");typeof window<"u"&&window.addEventListener("popstate",()=>{const e=c();e&&e!==t&&(t=e,i())});export{_ as l,l as s};
